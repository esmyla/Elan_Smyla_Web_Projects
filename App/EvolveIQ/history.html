<!-- history.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="./images/favicon.ico" />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Run History</title>
    <script src="https://cdn.tailwindcss.com" defer></script>
    <link rel="stylesheet" href="styles.css" />
</head>
<body class="bg-indigo-50 text-gray-900">

<!-- Navbar -->
<nav class="mb-2" style="background-color: rgba(134,191,248,0.82); box-shadow: 0 8px 6px -1px rgba(20, 113, 248, 0.25), 0 2px 4px -2px rgba(20, 113, 248, 0.25);">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between h-20 items-center">
        <div class="flex items-center space-x-8">
            <a href="index.html" class="flex items-center">
                <svg preserveAspectRatio="xMidYMid meet" viewBox="23.87 33.83 1159.74 226.77" xmlns="http://www.w3.org/2000/svg" class="h-8 w-auto">
                    <g>
                        <path d="M23.87 183.7c0-45.18 32.62-77.8 73.61-77.8 44.29 0 74.81 31.42 71.22 86.78H51.4c3.89 25.14 23.64 42.49 50.27 42.49 17.06 0 35.01-9.58 43.09-23.04l19.45 19.15c-12.87 17.06-38.9 29.32-62.54 29.32-45.18 0-77.8-32.32-77.8-76.9m117.89-14.96c0-21.84-17.95-37.4-43.09-37.4s-41.89 14.96-46.38 37.4z" fill="#ffffff"></path>
                        <path d="M169.6 108.59h29.92l48.77 125.68h5.98l47.58-125.68h29.92l-58.95 149.62h-45.48l-57.75-149.62Z" fill="#ffffff"></path>
                        <path d="M328.78 183.7c0-45.48 33.51-77.8 80.79-77.8s80.79 32.32 80.79 77.8-33.51 76.9-80.79 76.9-80.79-31.72-80.79-76.9m134.66 0c0-30.82-22.44-52.37-53.86-52.37s-53.86 21.54-53.86 52.37 22.44 51.47 53.86 51.47 53.86-21.25 53.86-51.47" fill="#ffffff"></path>
                        <path d="M511.91 203.15V36.85h26.93v166.3c0 22.44 6.88 31.12 27.53 31.12h15.26v23.94h-17.95c-35.01 0-51.77-17.95-51.77-55.06" fill="#ffffff"></path>
                        <path d="M572.06 108.59h29.92l48.77 125.68h5.98l47.58-125.68h29.92l-58.95 149.62H629.8l-57.75-149.62Z" fill="#ffffff"></path>
                        <path d="M740.23 183.7c0-45.18 32.62-77.8 73.61-77.8 44.29 0 74.81 31.42 71.22 86.78h-117.3c3.89 25.14 23.64 42.49 50.27 42.49 17.06 0 35.01-9.58 43.09-23.04l19.45 19.15c-12.87 17.06-38.9 29.32-62.54 29.32-45.18 0-77.8-32.32-77.8-76.9m117.89-14.96c0-21.84-17.95-37.4-43.09-37.4s-41.89 14.96-46.38 37.4z" fill="#ffffff"></path>
                        <path d="M1100.17 35.18h-96.24c-14.7 0-26.67 11.96-26.67 26.67V166.2c0 14.7 11.96 26.67 26.67 26.67h50.42v-26.7l-50.39.04-.03-104.32 96.2-.03V168.8h26.7V61.85c0-14.7-11.96-26.67-26.67-26.67Z" fill="#1471f8"></path>
                        <path fill="#1471f8" d="m1067.26 193.16 48.93 18.49v-29.29l-48.93-18.5z"></path>
                        <path fill="#1471f8" d="M961.91 94.9v97.97h-26.1V94.9z"></path>
                        <path fill="#1471f8" d="M961.91 35.31v46.04h-26.1V35.31z"></path>
                        <path d="M1144.36 37.38h-5.42v-3.55h14.73v3.55h-5.34v15.18h-3.98V37.38Z" fill="#1471f8"></path>
                        <path d="M1157.94 33.88h7.31l5.23 15.13h.56l5.26-15.13h7.31v18.65h-3.98v-15.1h-.48l-5.26 15.13h-6.24l-5.26-15.13h-.48v15.13h-3.98V33.88Z" fill="#1471f8"></path>
                    </g>
                </svg>
            </a>
        </div>
        <div id="userInfo" class="hidden flex items-center space-x-4">
            <img
                    id="userAvatar"
                    class="w-8 h-8 rounded-full border border-gray-300"
                    src="images/defaultProfile.png"
                    alt="Avatar"
            />
            <span id="userName" class="font-medium text-gray-800">â€¦</span>
            <button
                    onclick="window.location.href='history.html'"
                    class="bg-gray-100 text-gray-800 font-medium px-4 py-1 rounded hover:bg-gray-200 transition"
            >
                History
            </button>
            <button
                    id="logoutBtn"
                    class="bg-blue-500 text-white font-medium px-4 py-1 rounded hover:bg-blue-700 transition"
            >
                Logout
            </button>
        </div>
    </div>
</nav>

<!-- List view -->
<section id="listView" class="max-w-7xl mx-auto px-4">
    <!-- Filters -->
    <div class="mb-6 space-y-4">
        <div class="flex flex-wrap gap-4">
            <input id="filterKeyword"
                   type="text"
                   placeholder="Search by keyword..."
                   class="flex-grow p-2 border rounded focus:ring-blue-500 focus:border-blue-500" />
            <select id="filterDate"
                    class="p-2 border rounded focus:ring-blue-500 focus:border-blue-500">
                <option value="all">All time</option>
                <option value="day">Past day</option>
                <option value="week">Past week</option>
                <option value="month">Past month</option>
            </select>
        </div>
    </div>
    <!-- Gallery -->
    <main id="historyGallery" class="grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
        <!-- Cards injected here -->
    </main>
</section>

<!-- Detail view -->
<section id="detailView" class="hidden max-w-4xl mx-auto px-4 space-y-4">
    <button id="backBtn" class="text-blue-600 hover:underline">&larr; Back to History</button>
    <h2 class="text-xl font-bold text-gray-800">Comments for Run <span id="detailRunId"></span></h2>
    <div id="detailComments" class="space-y-6 max-w-[34.9rem] mx-auto"></div>
    <!-- Comments injected here -->
    </div>
</section>

<script type="module" src="supabaseClient.js"></script>
<script type="module" src="history.js"></script>
</body>
</html>