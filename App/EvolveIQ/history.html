<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Run History</title>
    <link rel="icon" href="./images/favicon.ico" />
    <script src="https://cdn.tailwindcss.com" defer></script>
    <link rel="stylesheet" href="styles.css" />
</head>
<body class="bg-indigo-50 text-gray-900">

<!-- Navbar -->
<nav class="mb-2 bg-blue-400/80 shadow">
    <div class="max-w-7xl mx-auto px-4 flex justify-between h-16 items-center">
        <a href="index.html" class="font-bold text-white text-lg">Home</a>
        <div id="userInfo" class="hidden flex items-center space-x-4">
            <img id="userAvatar" class="w-8 h-8 rounded-full border" src="images/defaultProfile.png" alt="Avatar" />
            <span id="userName" class="font-medium text-white">â€¦</span>
            <button onclick="window.location.href='history.html'" class="bg-gray-100 text-gray-800 px-3 py-1 rounded hover:bg-gray-200">
                History
            </button>
            <button id="logoutBtn" class="bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700">
                Logout
            </button>
        </div>
    </div>
</nav>

<!-- List view -->
<section id="listView" class="max-w-7xl mx-auto px-4">
    <div class="mb-6 flex flex-wrap gap-4">
        <input id="filterKeyword" type="text" placeholder="Search by keyword..."
               class="flex-grow p-2 border rounded focus:ring-blue-500 focus:border-blue-500" />
        <select id="filterDate" class="p-2 border rounded focus:ring-blue-500 focus:border-blue-500">
            <option value="all">All time</option>
            <option value="day">Past day</option>
            <option value="week">Past week</option>
            <option value="month">Past month</option>
        </select>
    </div>
    <main id="historyGallery" class="grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
        <!-- Cards injected here -->
    </main>
</section>

<!-- Detail view -->
<section id="detailView" class="hidden max-w-4xl mx-auto px-4 space-y-4">
    <button id="backBtn" class="text-blue-600 hover:underline">&larr; Back to History</button>
    <h2 class="text-xl font-bold text-gray-800">Comments for Run <span id="detailRunId"></span></h2>
    <div id="detailComments" class="space-y-6 max-w-[34.9rem] mx-auto"></div>
</section>

<script type="module" src="supabaseClient.js"></script>
<script type="module" src="history.js"></script>
</body>
</html>
