<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>All Agents</title>
    <!-- Include Tailwind CSS via CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900">
<nav class="bg-white shadow">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
            <!-- Logo and main navigation -->
            <div class="flex items-center">
                <a href="index.html" class="flex items-center">
                    <!-- Using the same SVG logo style as in the index -->
                    <svg class="w-12 h-12" viewBox="0 0 24 24" fill="black" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M12.9914 2.86904C12.9914 2.86899 12.9914 2.86895 12.9914 2.86891C12.9256 2.37165 12.5016 2 12 2C11.4983 2 11.0743 2.37171 11.0086 2.86904L11.0086 2.86932L11.0085 2.86992L11.0075 2.87704L11.0029 2.91013C10.9985 2.94035 10.9917 2.98656 10.9822 3.04699C10.9633 3.16792 10.9339 3.34537 10.8927 3.56523C10.81 4.00611 10.6812 4.61161 10.4967 5.27082C10.1127 6.64363 9.5417 8.04408 8.79289 8.79289C8.04408 9.5417 6.64363 10.1127 5.27082 10.4967C4.61161 10.6812 4.00611 10.81 3.56523 10.8927C3.34537 10.9339 3.16792 10.9633 3.04699 10.9822C2.98656 10.9917 2.94035 10.9985 2.91013 11.0029L2.87704 11.0075L2.86992 11.0085L2.86932 11.0086C2.86923 11.0086 2.86913 11.0086 2.86904 11.0086C2.86899 11.0086 2.86895 11.0086 2.86891 11.0086C2.37165 11.0744 2 11.4984 2 12C2 12.5017 2.37171 12.9257 2.86904 12.9914L2.86932 12.9914L2.86992 12.9915L2.87704 12.9925L2.91013 12.9971C2.94035 13.0015 2.98656 13.0083 3.04699 13.0178C3.16792 13.0367 3.34537 13.0661 3.56523 13.1073C4.00611 13.19 4.61161 13.3188 5.27082 13.5033C6.64363 13.8873 8.04408 14.4583 8.79289 15.2071C9.5417 15.9559 10.1127 17.3564 10.4967 18.7292C10.6812 19.3884 10.81 19.9939 10.8927 20.4348C10.9339 20.6546 10.9633 20.8321 10.9822 20.953C10.9917 21.0134 10.9985 21.0596 11.0029 21.0899L11.0075 21.123L11.0085 21.1301L11.0086 21.1307C11.0086 21.1308 11.0086 21.1309 11.0086 21.131C11.0086 21.131 11.0086 21.131 11.0086 21.131C11.0743 21.6283 11.4983 22 12 22C12.5017 22 12.9257 21.6283 12.9914 21.131L12.9914 21.1307L12.9915 21.1301L12.9925 21.123L12.9971 21.0899C13.0015 21.0596 13.0083 21.0134 13.0178 20.953C13.0367 20.8321 13.0661 20.6546 13.1073 20.4348C13.19 19.9939 13.3188 19.3884 13.5033 18.7292C13.8873 17.3564 14.4583 15.9559 15.2071 15.2071C15.9559 14.4583 17.3564 13.8873 18.7292 13.5033C19.3884 13.3188 19.9939 13.19 20.4348 13.1073C20.6546 13.0661 20.8321 13.0367 20.953 13.0178C21.0134 13.0083 21.0596 13.0015 21.0899 12.9971L21.123 12.9925L21.1301 12.9915L21.1307 12.9914C21.1308 12.9914 21.1309 12.9914 21.131 12.9914C21.131 12.9914 21.131 12.9914 21.131 12.9914C21.6283 12.9257 22 12.5017 22 12C22 11.4983 21.6283 11.0743 21.131 11.0086L21.1307 11.0086L21.1301 11.0085L21.123 11.0075L21.0899 11.0029C21.0596 10.9985 21.0134 10.9917 20.953 10.9822C20.8321 10.9633 20.6546 10.9339 20.4348 10.8927C19.9939 10.81 19.3884 10.6812 18.7292 10.4967C17.3564 10.1127 15.9559 9.5417 15.2071 8.79289C14.4583 8.04408 13.8873 6.64363 13.5033 5.27082C13.3188 4.61161 13.19 4.00611 13.1073 3.56523C13.0661 3.34537 13.0367 3.16792 13.0178 3.04699C13.0083 2.98656 13.0015 2.94035 12.9971 2.91013L12.9925 2.87704L12.9915 2.86992L12.9914 2.86932C12.9914 2.86923 12.9914 2.86913 12.9914 2.86904ZM16.8722 12C15.7644 11.5928 14.6021 11.0163 13.7929 10.2071C12.9837 9.39792 12.4072 8.23564 12 7.12776C11.5928 8.23564 11.0163 9.39792 10.2071 10.2071C9.39792 11.0163 8.23564 11.5928 7.12776 12C8.23564 12.4072 9.39792 12.9837 10.2071 13.7929C11.0163 14.6021 11.5928 15.7644 12 16.8722C12.4072 15.7644 12.9837 14.6021 13.7929 13.7929C14.6021 12.9837 15.7644 12.4072 16.8722 12Z"/>
                    </svg>
                    <span class="ml-2 text-xl font-bold">Smith.AI</span>
                </a>
                <div class="hidden sm:flex sm:ml-10 space-x-8">
                    <a href="create.html" class="border-b-2 border-transparent text-lg font-semibold text-gray-900 px-1 py-2 hover:text-indigo-600 transition">Create</a>
                    <a href="agents.html" class="border-b-2 border-indigo-500 text-lg font-semibold text-gray-900 px-1 py-2 hover:text-indigo-600 transition">Discover</a>
                </div>
            </div>
            <!-- Mobile menu toggle, notifications, and profile -->
            <div class="flex items-center">
                <!-- Mobile menu toggle -->
                <button type="button" class="bg-gray-100 p-2 rounded-full text-gray-900 hover:text-indigo-600 hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 sm:hidden" id="mobile-menu-toggle">
                    <span class="sr-only">Open main menu</span>
                    <svg class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"/>
                    </svg>
                </button>


            </div>
        </div>

    </div>
    <!-- Mobile menu (hidden by default, toggle via JavaScript) -->
    <div class="sm:hidden hidden" id="mobile-menu">
        <div class="px-2 pt-2 pb-3 space-y-1">
            <a href="create.html" class="block border-l-4 border-indigo-500 bg-indigo-50 text-gray-900 px-3 py-2 text-base font-medium">Create</a>
            <a href="agents.html" class="block border-l-4 border-transparent text-gray-900 hover:bg-indigo-50 hover:border-indigo-600 hover:text-indigo-600 px-3 py-2 text-base font-medium">Discover</a>
        </div>
    </div>
</nav>

<!-- Main Section -->
<main class="bg-white py-16">
    <div class="mx-auto max-w-7xl px-6 lg:px-8">
        <div class="mx-auto max-w-2xl text-center">
            <h1 class="text-5xl font-bold tracking-tight text-gray-900 sm:text-7xl">Browse Agents</h1>
            <p class="mt-4 text-lg font-medium text-gray-600">
                Discover a variety of innovative agents ready to assist you.
            </p>
        </div>
        <div class="mt-10 flex justify-center">
            <button id="loadAgents" class="rounded-md bg-indigo-500 px-6 py-3 text-lg font-semibold text-white shadow hover:bg-indigo-600 transition">
                Load Agents
            </button>
        </div>
        <ul id="agentsList" role="list" class="mt-10 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 ">
            <!-- Agent cards inserted here -->
        </ul>
    </div>
</main>

<footer class="bg-white">
    <div class="mx-auto max-w-7xl px-6 lg:px-8 py-8">
        <nav class="flex justify-center gap-x-12" aria-label="Footer">
            <a href="create.html" class="text-lg font-semibold text-gray-900 hover:text-indigo-600 transition">Create</a>
            <a href="agents.html" class="text-lg font-semibold text-gray-900 hover:text-indigo-600 transition">Discover</a>
        </nav>
        <p class="mt-10 text-center text-lg font-bold text-gray-500">
            &copy; 2025 Smith AI. All rights reserved.
        </p>
    </div>
</footer>

<script>
    const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenuToggle.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));

    // Backup agents (from backupagents.html)
    const backupAgents = [
        { name: "Social Media Manager", description: "Automates posts and engagements.", link: "#" },
        { name: "Customer Support Bot", description: "Handles common customer inquiries.", link: "#" },
        { name: "Inventory Tracker", description: "Monitors and updates stock levels.", link: "#" },
        { name: "Email Assistant", description: "Automates responses and scheduling.", link: "#" },
        { name: "Invoice Generator", description: "Creates and manages invoices.", link: "#" },
        { name: "Market Trend Analyzer", description: "Provides insights into market trends.", link: "#" },
        { name: "SEO Optimizer", description: "Improves website search ranking.", link: "#" },
        { name: "Ad Performance Tracker", description: "Analyzes online ad performance.", link: "#" },
        { name: "Legal Document Assistant", description: "Drafts business agreements.", link: "#" },
        { name: "Tax Calculator", description: "Estimates business tax liabilities.", link: "#" },
        { name: "HR Assistant", description: "Manages employee onboarding.", link: "#" },
        { name: "Chatbot Trainer", description: "Customizes AI chatbots.", link: "#" },
        { name: "Financial Forecaster", description: "Predicts financial trends.", link: "#" },
        { name: "Task Automation Bot", description: "Automates repetitive workflows.", link: "#" },
        { name: "Lead Generator", description: "Finds potential customers.", link: "#" },
        { name: "Website Audit AI", description: "Analyzes website performance.", link: "#" },
        { name: "Appointment Scheduler", description: "Manages client bookings.", link: "#" },
        { name: "Product Recommendation AI", description: "Suggests products to customers.", link: "#" },
        { name: "Survey Analyzer", description: "Processes customer feedback.", link: "#" },
        { name: "Data Security Monitor", description: "Detects security threats.", link: "#" }
    ];

    function renderAgentCard(container, title, desc, link, avatar = "images/placeholderAgent.png") {
        const li = document.createElement('li');
        li.className = "col-span-1 rounded-lg bg-white p-6 shadow hover:shadow-xl transition transform hover:scale-105 bg-indigo-100";

        // make it a button instead of a normal <a>
        const button = document.createElement('button');
        button.type = "button";
        button.className = "w-full text-left block focus:outline-none";
        button.addEventListener("click", () => {
            // instead of navigating to link, open the modal
            openModal("apiModal");
        });

        button.innerHTML = `
        <div class="flex items-center space-x-4">
          <img class="h-12 w-12 rounded-full object-cover" src="${avatar}" alt="Agent Avatar">
          <div>
            <h3 class="text-lg font-semibold text-gray-900">${title}</h3>
            <p class="text-sm text-gray-600">Backup Agent</p>
          </div>
        </div>
        <p class="mt-4 text-gray-700">${desc}</p>
    `;

        li.appendChild(button);
        container.appendChild(li);
    }


    function loadAgents() {
        fetch('/api/agents')
            .then(res => res.json())
            .then(data => {
                const agentsList = document.getElementById('agentsList');
                agentsList.innerHTML = '';

                if (data.agents && data.agents.length > 0) {
                    data.agents.forEach(agent => {
                        renderAgentCard(agentsList, agent.agentName, agent.description, agent.FRN, agent.avatarUrl);
                    });
                }

                // Always show backup agents as well
                backupAgents.forEach(agent => {
                    renderAgentCard(agentsList, agent.name, agent.description, agent.link);
                });
            })
            .catch(err => {
                console.error("Error loading agents:", err);
                const agentsList = document.getElementById('agentsList');
                agentsList.innerHTML = '';
                backupAgents.forEach(agent => {
                    renderAgentCard(agentsList, agent.name, agent.description, agent.link);
                });
            });
    }

    document.getElementById('loadAgents').addEventListener('click', loadAgents);
    window.onload = loadAgents;
</script>

<!-- API Disconnect Modal -->
<div id="apiModal"
     class="fixed inset-0 z-50 hidden flex items-center justify-center bg-black/60 backdrop-blur-sm">
    <div class="bg-white rounded-xl shadow-xl p-8 max-w-md w-full text-center space-y-6">
        <h3 class="text-2xl font-bold text-indigo-900">All links disconnected</h3>
        <p class="text-gray-800">
            Please visit
            <a href="https://youtu.be/HiU8W6E7-M8?si=pM3bDpv-P7nwcGmJ" target="_blank"
               class="text-indigo-600 underline">this video</a>
            to learn more about SmithAI, then reload the page.
        </p>
        <button onclick="location.reload()"
                class="w-full rounded-md bg-gradient-to-r from-blue-500 via-indigo-500
               to-purple-600 px-4 py-2 text-lg font-bold text-white shadow-lg
               hover:shadow-xl transition-all duration-300">
            Reload Page
        </button>
    </div>
</div>
<script>
    // Simple modal open/close helpers
    function openModal(id) {
        document.getElementById(id).classList.remove("hidden");
    }
    function closeModal(id) {
        document.getElementById(id).classList.add("hidden");
    }
</script>

</body>
</html>
